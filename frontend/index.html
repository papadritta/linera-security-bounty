<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Linera Security Bounty Platform</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;600&display=swap');
    
    *{margin:0;padding:0;box-sizing:border-box}
    :root{
      --primary:#8D96FF;
      --primary-dark:#6B75E8;
      --secondary:#A4ABFF;
      --success:#51cf66;
      --danger:#DE2A02;
      --warning:#ffd43b;
      --dark:#0A1F27;
      --dark-light:#1C3640;
      --text:#fff;
      --text-muted:rgba(255,255,255,0.7);
      --card-bg:rgba(255,255,255,0.05);
      --border:rgba(141,150,255,0.2);
      --shadow:0 20px 60px rgba(0,0,0,0.4);
    }
    
    body{
      font-family:'Space Grotesk',sans-serif;
      background:linear-gradient(135deg,var(--dark) 0%,var(--dark-light) 100%);
      min-height:100vh;
      color:var(--text);
      line-height:1.6;
      overflow-x:hidden;
    }
    
    /* Navigation */
    .nav{
      background:rgba(10,31,39,0.95);
      backdrop-filter:blur(20px);
      padding:18px 40px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      border-bottom:1px solid var(--border);
      position:sticky;
      top:0;
      z-index:1000;
      box-shadow:0 4px 20px rgba(0,0,0,0.3);
    }
    
    .nav-logo{
      display:flex;
      align-items:center;
      gap:15px;
      font-size:1.5em;
      font-weight:700;
      color:var(--primary);
      letter-spacing:-0.5px;
    }
    
    .nav-links{
      display:flex;
      gap:10px;
      align-items:center;
    }
    
    .nav-links a{
      color:var(--text-muted);
      text-decoration:none;
      font-weight:600;
      font-size:1.2em;
      transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      padding:10px 18px;
      border-radius:10px;
      letter-spacing:0.3px;
    }
    
    .nav-links a:hover{
      background:rgba(141,150,255,0.15);
      color:var(--primary);
      transform:translateY(-2px);
    }
    
    /* Hero Section */
    .hero{
      text-align:center;
      padding:80px 20px;
      background:linear-gradient(135deg,rgba(141,150,255,0.15) 0%,rgba(164,171,255,0.05) 100%);
      border-bottom:1px solid var(--border);
      position:relative;
      overflow:hidden;
    }
    
    .hero::before{
      content:'';
      position:absolute;
      top:0;
      left:0;
      right:0;
      bottom:0;
      background:radial-gradient(circle at 50% 50%, rgba(141,150,255,0.1) 0%, transparent 70%);
      pointer-events:none;
    }
    
    .hero h1{
      font-size:3.5em;
      font-weight:700;
      margin-bottom:20px;
      background:linear-gradient(135deg,#8D96FF 0%,#A4ABFF 100%);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      background-clip:text;
      letter-spacing:-2px;
      line-height:1.1;
      position:relative;
    }
    
    .hero p{
      font-size:1.3em;
      color:var(--text-muted);
      margin-bottom:40px;
      font-weight:500;
      letter-spacing:0.3px;
      position:relative;
    }
    
    .hero-stats{
      display:flex;
      justify-content:center;
      gap:60px;
      margin-top:40px;
      position:relative;
    }
    
    .stat-item{
      text-align:center;
      padding:20px 30px;
      background:rgba(255,255,255,0.03);
      border-radius:15px;
      border:1px solid var(--border);
      backdrop-filter:blur(10px);
      transition:all 0.3s ease;
    }
    
    .stat-item:hover{
      transform:translateY(-5px);
      border-color:var(--primary);
      background:rgba(141,150,255,0.1);
    }
    
    .stat-value{
      font-size:2.5em;
      font-weight:700;
      color:var(--primary);
      font-family:'JetBrains Mono',monospace;
      letter-spacing:-1px;
    }
    
    .stat-label{
      color:var(--text-muted);
      font-size:0.95em;
      margin-top:8px;
      font-weight:600;
      letter-spacing:0.5px;
    }
    
    /* Container */
    .container{
      max-width:1400px;
      margin:0 auto;
      padding:40px 20px;
    }
    
    /* Search Bar */
    .search-bar{
      background:var(--card-bg);
      padding:25px;
      border-radius:20px;
      margin-bottom:40px;
      display:flex;
      gap:20px;
      flex-wrap:wrap;
      align-items:center;
      border:1px solid var(--border);
      backdrop-filter:blur(10px);
      box-shadow:var(--shadow);
    }
    
    .search-input{
      flex:1;
      min-width:300px;
      padding:15px 25px;
      background:rgba(255,255,255,0.08);
      border:2px solid rgba(141,150,255,0.3);
      border-radius:12px;
      color:var(--text);
      font-size:1em;
      font-family:'Space Grotesk',sans-serif;
      transition:all 0.3s ease;
      letter-spacing:0.3px;
    }
    
    .search-input:focus{
      outline:none;
      border-color:var(--primary);
      background:rgba(255,255,255,0.12);
      box-shadow:0 0 0 4px rgba(141,150,255,0.1);
    }
    
    .search-input::placeholder{
      color:rgba(255,255,255,0.4);
      font-weight:500;
    }
    
    .filter-group{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
    }
    
    .filter-btn{
      padding:12px 24px;
      background:rgba(141,150,255,0.15);
      border:2px solid rgba(141,150,255,0.3);
      border-radius:12px;
      color:var(--text);
      cursor:pointer;
      transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-weight:600;
      font-family:'Space Grotesk',sans-serif;
      font-size:0.95em;
      letter-spacing:0.3px;
    }
    
    .filter-btn:hover{
      background:rgba(141,150,255,0.25);
      transform:translateY(-2px);
    }
    
    .filter-btn.active{
      background:var(--primary);
      border-color:var(--primary);
      box-shadow:0 4px 15px rgba(141,150,255,0.4);
      transform:translateY(-2px);
    }
    
    /* Role Toggle */
    .role-toggle{
      display:flex;
      align-items:center;
      gap:15px;
      padding:12px 20px;
      background:rgba(255,255,255,0.05);
      border-radius:30px;
      border:2px solid var(--border);
      font-weight:600;
      font-size:0.9em;
    }
    
    .switch{
      position:relative;
      width:56px;
      height:30px;
    }
    
    .switch input{
      opacity:0;
      width:0;
      height:0;
    }
    
    .slider{
      position:absolute;
      cursor:pointer;
      top:0;
      left:0;
      right:0;
      bottom:0;
      background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      transition:0.4s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius:30px;
      box-shadow:inset 0 2px 4px rgba(0,0,0,0.2);
    }
    
    .slider:before{
      position:absolute;
      content:"";
      height:24px;
      width:24px;
      left:3px;
      bottom:3px;
      background:white;
      transition:0.4s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius:50%;
      box-shadow:0 2px 6px rgba(0,0,0,0.3);
    }
    
    input:checked+.slider{
      background:linear-gradient(135deg,#51cf66 0%,#40c057 100%);
    }
    
    input:checked+.slider:before{
      transform:translateX(26px);
    }
    
    /* Section Title */
    .section-title{
      font-size:2.2em;
      margin:50px 0 30px 0;
      color:var(--primary);
      display:flex;
      align-items:center;
      gap:15px;
      font-weight:700;
      letter-spacing:-1px;
    }
    
    /* Grid */
    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fill,minmax(380px,1fr));
      gap:30px;
      margin-bottom:50px;
    }
    
    /* Bounty Card */
    .bounty-card{
      background:var(--card-bg);
      border:1px solid var(--border);
      border-radius:20px;
      padding:30px;
      transition:all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      cursor:pointer;
      position:relative;
      overflow:hidden;
      backdrop-filter:blur(10px);
    }
    
    .bounty-card::before{
      content:'';
      position:absolute;
      top:0;
      left:0;
      width:5px;
      height:100%;
      background:linear-gradient(135deg,var(--primary),var(--secondary));
    }
    
    .bounty-card:hover{
      transform:translateY(-8px) scale(1.02);
      box-shadow:0 25px 70px rgba(141,150,255,0.25);
      border-color:var(--primary);
    }
    
    .bounty-header{
      display:flex;
      justify-content:space-between;
      align-items:start;
      margin-bottom:20px;
    }
    
    .bounty-id{
      font-size:1.6em;
      font-weight:700;
      color:var(--primary);
      font-family:'JetBrains Mono',monospace;
      letter-spacing:-0.5px;
    }
    
    .bounty-status{
      padding:6px 16px;
      border-radius:20px;
      font-size:0.8em;
      font-weight:700;
      letter-spacing:0.5px;
      text-transform:uppercase;
    }
    
    .status-active{
      background:var(--success);
      color:white;
      box-shadow:0 4px 12px rgba(81,207,102,0.3);
    }
    
    .status-closed{
      background:var(--danger);
      color:white;
    }
    
    .bounty-contract{
      color:var(--text-muted);
      font-size:0.9em;
      margin-bottom:15px;
      word-break:break-all;
      font-family:'JetBrains Mono',monospace;
      font-weight:500;
      letter-spacing:0.3px;
    }
    
    .bounty-amount{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:20px;
      background:rgba(141,150,255,0.08);
      border-radius:15px;
      margin:20px 0;
      border:1px solid rgba(141,150,255,0.2);
    }
    
    .amount-label{
      color:var(--text-muted);
      font-size:0.85em;
      margin-bottom:5px;
      font-weight:600;
      letter-spacing:0.5px;
      text-transform:uppercase;
    }
    
    .amount-value{
      font-size:1.6em;
      font-weight:700;
      color:var(--success);
      font-family:'JetBrains Mono',monospace;
      letter-spacing:-0.5px;
    }
    
    .bounty-tags{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:20px;
    }
    
    .tag{
      padding:8px 16px;
      background:rgba(141,150,255,0.15);
      border:2px solid rgba(141,150,255,0.3);
      border-radius:10px;
      font-size:0.85em;
      font-weight:700;
      letter-spacing:0.5px;
      transition:all 0.3s ease;
    }
    
    .tag:hover{
      transform:translateY(-2px);
    }
    
    .tag-low{border-color:var(--success);color:var(--success);background:rgba(81,207,102,0.1)}
    .tag-medium{border-color:var(--warning);color:var(--warning);background:rgba(255,212,59,0.1)}
    .tag-high{border-color:#F35F3F;color:#F35F3F;background:rgba(243,95,63,0.1)}
    .tag-critical{border-color:var(--danger);color:var(--danger);background:rgba(222,42,2,0.1)}
    
    /* Card */
    .card{
      background:var(--card-bg);
      border:1px solid var(--border);
      padding:40px;
      border-radius:20px;
      margin-bottom:40px;
      backdrop-filter:blur(10px);
      box-shadow:var(--shadow);
    }
    
    .card h2{
      color:var(--primary);
      margin-bottom:30px;
      font-size:2em;
      font-weight:700;
      letter-spacing:-0.5px;
    }
    
    /* Form */
    .form-group{
      margin-bottom:25px;
    }
    
    .form-group label{
      display:block;
      margin-bottom:10px;
      color:var(--text);
      font-weight:600;
      font-size:0.95em;
      letter-spacing:0.3px;
    }
    
    .form-group input,.form-group select,.form-group textarea{
      width:100%;
      padding:15px 20px;
      background:rgba(255,255,255,0.08);
      border:2px solid rgba(141,150,255,0.3);
      border-radius:12px;
      color:var(--text);
      font-size:1em;
      font-family:'Space Grotesk',sans-serif;
      transition:all 0.3s ease;
      letter-spacing:0.3px;
    }
    
    .form-group input:focus,.form-group select:focus,.form-group textarea:focus{
      outline:none;
      border-color:var(--primary);
      background:rgba(255,255,255,0.12);
      box-shadow:0 0 0 4px rgba(141,150,255,0.1);
    }
    
    .form-group input::placeholder,.form-group textarea::placeholder{
      color:rgba(255,255,255,0.4);
      font-weight:500;
    }
    
    .form-group textarea{
      resize:vertical;
      font-family:'Space Grotesk',sans-serif;
    }
    
    /* Button */
    .btn{
      background:linear-gradient(135deg,var(--primary) 0%,var(--secondary) 100%);
      color:white;
      padding:15px 40px;
      border:none;
      border-radius:12px;
      font-weight:700;
      cursor:pointer;
      transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-size:1.05em;
      font-family:'Space Grotesk',sans-serif;
      letter-spacing:0.5px;
      text-transform:uppercase;
      box-shadow:0 4px 15px rgba(141,150,255,0.3);
    }
    
    .btn:hover{
      transform:translateY(-3px);
      box-shadow:0 8px 25px rgba(141,150,255,0.5);
    }
    
    .btn:active{
      transform:translateY(-1px);
    }
    
    /* Submission Card */
    .submission-card{
      background:var(--card-bg);
      border-left:5px solid var(--primary);
      padding:25px;
      border-radius:15px;
      margin-bottom:20px;
      border:1px solid var(--border);
      backdrop-filter:blur(10px);
      transition:all 0.3s ease;
    }
    
    .submission-card:hover{
      transform:translateX(5px);
      border-color:var(--primary);
      box-shadow:0 10px 30px rgba(141,150,255,0.2);
    }
    
    .submission-header{
      display:flex;
      justify-content:space-between;
      align-items:start;
      margin-bottom:15px;
    }
    
    .submission-title{
      font-size:1.4em;
      font-weight:700;
      color:var(--text);
      letter-spacing:-0.3px;
    }
    
    .submission-meta{
      color:var(--text-muted);
      font-size:0.9em;
      margin-bottom:20px;
      font-family:'JetBrains Mono',monospace;
      letter-spacing:0.3px;
    }
    
    /* Badge */
    .badge{
      display:inline-block;
      padding:8px 16px;
      border-radius:8px;
      font-size:0.85em;
      font-weight:700;
      margin-right:12px;
      letter-spacing:0.5px;
      text-transform:uppercase;
    }
    
    .badge-pending{background:#C8CBD6;color:var(--dark)}
    .badge-approved{background:var(--success);color:white;box-shadow:0 4px 12px rgba(81,207,102,0.3)}
    .badge-rejected{background:var(--danger);color:white}
    
    /* Alert */
    .alert{
      padding:18px 25px;
      border-radius:12px;
      margin-bottom:25px;
      font-weight:600;
      font-size:0.95em;
      letter-spacing:0.3px;
      animation:slideIn 0.3s ease;
    }
    
    @keyframes slideIn{
      from{opacity:0;transform:translateY(-10px)}
      to{opacity:1;transform:translateY(0)}
    }
    
    .alert-success{
      background:var(--success);
      color:white;
      box-shadow:0 4px 15px rgba(81,207,102,0.3);
    }
    
    .alert-error{
      background:var(--danger);
      color:white;
      box-shadow:0 4px 15px rgba(222,42,2,0.3);
    }
    
    /* Newsletter */
    .newsletter{
      background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      padding:60px 40px;
      border-radius:25px;
      text-align:center;
      margin:60px 0;
      box-shadow:0 20px 60px rgba(102,126,234,0.4);
      position:relative;
      overflow:hidden;
    }
    
    .newsletter::before{
      content:'';
      position:absolute;
      top:-50%;
      right:-50%;
      width:100%;
      height:100%;
      background:radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    }
    
    .newsletter h2{
      margin-bottom:20px;
      font-size:2.2em;
      font-weight:700;
      letter-spacing:-1px;
      position:relative;
    }
    
    .newsletter p{
      margin-bottom:35px;
      font-size:1.2em;
      font-weight:500;
      opacity:0.95;
      position:relative;
    }
    
    .newsletter-form{
      display:flex;
      gap:15px;
      justify-content:center;
      flex-wrap:wrap;
      position:relative;
    }
    
    .newsletter-form input{
      min-width:350px;
      padding:15px 25px;
      border-radius:12px;
      border:none;
      font-size:1em;
      font-family:'Space Grotesk',sans-serif;
      letter-spacing:0.3px;
    }
    
    /* Footer */
    .footer{
      text-align:center;
      padding:50px 20px;
      color:var(--text-muted);
      border-top:1px solid var(--border);
      margin-top:80px;
    }
    
    .footer a{
      color:var(--primary);
      text-decoration:none;
      font-weight:600;
      transition:all 0.3s ease;
    }
    
    .footer a:hover{
      color:var(--secondary);
      text-decoration:underline;
    }
    
    /* Utilities */
    .admin-only,.user-only{display:none}
    
    /* Responsive */
    @media(max-width:768px){
      .hero h1{font-size:2.2em}
      .hero p{font-size:1.1em}
      .hero-stats{flex-direction:column;gap:25px}
      .grid{grid-template-columns:1fr}
      .search-bar{flex-direction:column}
      .nav{padding:15px 20px}
      .nav-links{flex-wrap:wrap;gap:8px}
      .newsletter-form{flex-direction:column;align-items:stretch}
      .newsletter-form input{min-width:100%}
      .card{padding:25px}
    }
    </style>
</head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<body>

    <nav class="nav">
        <div class="nav-logo">
            <img src="linera_logo_full_white.svg" alt="Linera Bounty" style="height:40px;">
          </div>
        <div class="nav-links">
          <a href="https://linera.io" target="_blank" style="display:flex;align-items:center;gap:5px">
            <svg width="38" height="38" fill="currentColor" viewBox="0 0 24 24">
             <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
            </svg>
          </a>
          <a href="https://github.com/linera-io" target="_blank" style="display:flex;align-items:center;gap:5px">
            <svg width="32" height="32" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
            </svg>
          </a>
          <a href="https://twitter.com/linera_io" target="_blank" style="display:flex;align-items:center;gap:5px">
            <svg width="32" height="32" fill="currentColor" viewBox="0 0 24 24">
              <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
            </svg>
          </a>
          <a href="https://discord.gg/linera" target="_blank" style="display:flex;align-items:center;gap:5px">
            <svg width="32" height="32" fill="currentColor" viewBox="0 0 24 24">
              <path d="M20.317 4.37a19.791 19.791 0 00-4.885-1.515.074.074 0 00-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 00-5.487 0 12.64 12.64 0 00-.617-1.25.077.077 0 00-.079-.037A19.736 19.736 0 003.677 4.37a.07.07 0 00-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 00.031.057 19.9 19.9 0 005.993 3.03.078.078 0 00.084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 00-.041-.106 13.107 13.107 0 01-1.872-.892.077.077 0 01-.008-.128 10.2 10.2 0 00.372-.292.074.074 0 01.077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 01.078.01c.12.098.246.198.373.292a.077.077 0 01-.006.127 12.299 12.299 0 01-1.873.892.077.077 0 00-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 00.084.028 19.839 19.839 0 006.002-3.03.077.077 0 00.032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 00-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/>
            </svg>
          </a>
          <div class="role-toggle">
            <span>Hunter</span>
            <label class="switch"><input type="checkbox" id="roleToggle"><span class="slider"></span></label>
            <span>Admin</span>
          </div>
        </div>
      </nav>

<div class="hero">
  <h1><i class="fa-solid fa-shield-halved"></i> Secure the Future of Web3</h1>
  <p>Discover vulnerabilities, earn rewards, build reputation on Linera microchains</p>
  <div class="hero-stats">
    <div class="stat-item"><div class="stat-value" id="totalBounties">0</div><div class="stat-label">Active Bounties</div></div>
    <div class="stat-item"><div class="stat-value" id="totalRewards">0</div><div class="stat-label">Total Rewards</div></div>
    <div class="stat-item"><div class="stat-value" id="totalSubmissions">0</div><div class="stat-label">Submissions</div></div>
  </div>
</div>

<!-- Performance Monitor -->
<div style="position:fixed;bottom:20px;right:20px;background:rgba(10,31,39,0.95);border:1px solid var(--border);border-radius:15px;padding:20px;backdrop-filter:blur(20px);z-index:1000;min-width:300px">
  <h3 style="color:var(--primary);font-size:0.9em;margin-bottom:15px;display:flex;align-items:center;gap:8px">
    <i class="fa-solid fa-bolt"></i> Performance Monitor
  </h3>
  <div id="perfLog" style="max-height:300px;overflow-y:auto;font-family:'JetBrains Mono',monospace;font-size:0.75em"></div>
</div>

<div class="container">
  <div id="alerts"></div>

  <div class="search-bar">
    <input type="text" class="search-input" id="searchInput" placeholder="Search bounties by contract address...">
    <div class="filter-group">
      <button class="filter-btn active" data-filter="all">All</button>
      <button class="filter-btn" data-filter="active">Active</button>
      <button class="filter-btn" data-filter="high">High Severity</button>
      <button class="filter-btn" data-filter="critical">Critical</button>
    </div>
  </div>

  <div class="card admin-only">
    <h2><i class="fa-solid fa-plus"></i> Create New Bounty</h2>
    <form id="createBountyForm">
      <div class="form-group"><label>Contract Address</label><input id="contractAddress" placeholder="0x..." required></div>
      <div class="form-group"><label>Reward Pool (tokens)</label><input type="number" id="rewardPool" value="50000" required></div>
      <div class="form-group"><label>Minimum Severity</label>
        <select id="minSeverity"><option>LOW</option><option>MEDIUM</option><option selected>HIGH</option><option>CRITICAL</option></select>
      </div>
      <button class="btn">Create Bounty</button>
    </form>
  </div>

  <div class="card user-only">
    <h2><i class="fa-solid fa-bug"></i> Submit Vulnerability</h2>
    <form id="submitVulnForm">
      <div class="form-group"><label>Bounty ID</label><input type="number" id="bountyId" value="0" required></div>
      <div class="form-group"><label>Vulnerability Title</label><input id="vulnTitle" placeholder="e.g., Reentrancy Attack" required></div>
      <div class="form-group"><label>Description</label><textarea id="vulnDescription" rows="4" placeholder="Detailed description..." required></textarea></div>
      <div class="form-group"><label>Severity Level</label>
        <select id="vulnSeverity"><option>LOW</option><option>MEDIUM</option><option selected>HIGH</option><option>CRITICAL</option></select>
      </div>
      <div class="form-group"><label>Proof of Concept</label><textarea id="proofOfConcept" rows="5" placeholder="Code or steps to reproduce..." required></textarea></div>
      <button class="btn">Submit Vulnerability</button>
    </form>
  </div>

  <div class="card user-only">
    <h2><i class="fa-solid fa-hand-holding-dollar"></i> Claim Payout</h2>
    <form id="claimPayoutForm">
      <div class="form-group"><label>Submission ID</label><input type="number" id="claimSubmissionId" placeholder="0" required></div>
      <button class="btn">Claim Payout</button>
    </form>
  </div>

  <h2 class="section-title" id="bounties"><i class="fa-solid fa-list"></i> Active Bug Bounty Programs</h2>
  <div class="grid" id="bountyList"></div>

  <div class="card admin-only">
    <h2><i class="fa-solid fa-thumbs-up"></i> Verify Submissions</h2>
    <form id="verifyForm">
      <div class="form-group"><label>Submission ID</label><input type="number" id="submissionId" required></div>
      <div class="form-group"><label>Decision</label>
        <select id="approved"><option value="true">Approve</option><option value="false">Reject</option></select>
      </div>
      <div class="form-group"><label>Payout Amount (tokens)</label><input type="number" id="payoutAmount" required></div>
      <button class="btn">Verify Submission</button>
    </form>
  </div>

  <h2 class="section-title"><i class="fa-solid fa-download"></i> Vulnerability Submissions</h2>
  <div id="submissionList"></div>

  <div class="newsletter">
    <h2><i class="fa-solid fa-envelope"></i> Stay Updated on Security Discoveries</h2>
    <p>Get notified about new bounty programs, critical vulnerabilities, and platform updates</p>
    <form class="newsletter-form" id="subscribeForm">
      <input type="email" id="emailSubscribe" placeholder="your@email.com" required>
      <button class="btn" style="background:#fff;color:#667eea">Subscribe</button>
    </form>
  </div>

  <div class="footer">
    <p>Built with <i class="fa-solid fa-heart"></i> on Linera Protocol by <a href="https://github.com/papadritta" style="color:#8D96FF">@papadritta</a></p>
    <div style="display:flex;justify-content:center;gap:30px;margin:25px 0;align-items:center">
      <a href="https://github.com/papadritta" style="color:#8D96FF;text-decoration:none;display:flex;align-items:center;gap:8px;font-weight:600;font-size:1.1em;transition:.3s" onmouseover="this.style.opacity='0.7'" onmouseout="this.style.opacity='1'">
        <svg width="40" height="40" fill="currentColor" viewBox="0 0 32 32">
          <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
        </svg>
        <span>GitHub</span>
      </a>
      <a href="https://x.com/papadritta" style="color:#8D96FF;text-decoration:none;display:flex;align-items:center;gap:8px;font-weight:600;font-size:1.1em;transition:.3s" onmouseover="this.style.opacity='0.7'" onmouseout="this.style.opacity='1'">
        <svg width="40" height="40" fill="currentColor" viewBox="0 0 32 32">
          <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
        </svg>
        <span>Twitter</span>
      </a>
      <a href="https://discord.com/users/214964573059547136" style="color:#8D96FF;text-decoration:none;display:flex;align-items:center;gap:8px;font-weight:600;font-size:1.1em;transition:.3s" onmouseover="this.style.opacity='0.7'" onmouseout="this.style.opacity='1'">
        <svg width="40" height="40" fill="currentColor" viewBox="0 0 32 32">
          <path d="M20.317 4.37a19.791 19.791 0 00-4.885-1.515.074.074 0 00-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 00-5.487 0 12.64 12.64 0 00-.617-1.25.077.077 0 00-.079-.037A19.736 19.736 0 003.677 4.37a.07.07 0 00-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 00.031.057 19.9 19.9 0 005.993 3.03.078.078 0 00.084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 00-.041-.106 13.107 13.107 0 01-1.872-.892.077.077 0 01-.008-.128 10.2 10.2 0 00.372-.292.074.074 0 01.077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 01.078.01c.12.098.246.198.373.292a.077.077 0 01-.006.127 12.299 12.299 0 01-1.873.892.077.077 0 00-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 00.084.028 19.839 19.839 0 006.002-3.03.077.077 0 00.032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 00-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/>
        </svg>
        <span>Discord</span>
      </a>
    </div>
    <p style="margin-top:10px;color:rgba(255,255,255,0.5)">© 2025 Linera Security Bounty Platform</p>
  </div>
</div>

<script>
const GRAPHQL_ENDPOINT='http://localhost:8080/chains/cac50a5250d324300f0d69526b837885336ee457bc672f11d7686f231feb1f2a/applications/fc05474eb0fae45aecb4570a35051413a6d6886767f5771ae8826e7f18cdd57c';
let allBounties=[],allSubmissions=[];

function showAlert(msg,type='success'){
  const alert=document.createElement('div');
  alert.className=`alert alert-${type}`;
  alert.textContent=msg;
  document.getElementById('alerts').appendChild(alert);
  setTimeout(()=>alert.remove(),5000);
}

function escapeHtml(t){return t?.replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]))}

function escapeGraphQL(str){
  return str.replace(/\\/g, '\\\\').replace(/"/g, '\\"').replace(/\n/g, '\\n').replace(/\r/g, '\\r').replace(/\t/g, '\\t');
}

function logPerformance(query, duration, status){
  const perfLog = document.getElementById('perfLog');
  if(!perfLog) return;
  
  const timestamp = new Date().toLocaleTimeString('en-US', {hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit'});
  const milliseconds = new Date().getMilliseconds().toString().padStart(3, '0');
  
  // Extract operation name
  let operation = 'query';
  if(query.includes('mutation')){
    operation = query.match(/mutation\{(\w+)/)?.[1] || 'mutation';
  } else if(query.includes('bounties') || query.includes('submissions')){
    operation = query.match(/\{(\w+)/)?.[1] || 'query';
  }
  
  const statusColor = status === 'success' ? '#51cf66' : '#DE2A02';
  const statusIcon = status === 'success' ? 'OK' : 'ERR';
  
  const logEntry = document.createElement('div');
  logEntry.style.cssText = `
    padding:8px;
    margin-bottom:8px;
    background:rgba(255,255,255,0.03);
    border-left:3px solid ${statusColor};
    border-radius:5px;
    animation:slideIn 0.3s ease;
  `;
  
  logEntry.innerHTML = `
    <div style="display:flex;justify-content:space-between;margin-bottom:4px">
      <span style="color:var(--primary);font-weight:600">${operation}</span>
      <span style="color:${statusColor};font-weight:700">${statusIcon} ${duration}ms</span>
    </div>
    <div style="color:var(--text-muted);font-size:0.85em">${timestamp}.${milliseconds}</div>
  `;
  
  perfLog.insertBefore(logEntry, perfLog.firstChild);
  
  // Keep only last 3 entries
  while(perfLog.children.length > 3){
    perfLog.removeChild(perfLog.lastChild);
  }
}

async function graphqlQuery(query){
  const startTime = performance.now();
  try{
    const res=await fetch(GRAPHQL_ENDPOINT,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({query})});
    const result=await res.json();
    const endTime = performance.now();
    const duration = (endTime - startTime).toFixed(4);
    
    logPerformance(query, duration, result.errors ? 'error' : 'success');
    
    if(result.errors){showAlert(result.errors[0].message,'error');throw new Error(result.errors[0].message)}
    return result.data;
  }catch(e){
    const endTime = performance.now();
    const duration = (endTime - startTime).toFixed(4);
    logPerformance(query, duration, 'error');
    showAlert(e.message,'error');
    throw e;
  }
}

async function loadBounties(){
  const data=await graphqlQuery(`{bounties{id contractAddress rewardPool remainingPool minSeverity active}}`);
  allBounties=data.bounties||[];
  updateStats();
  renderBounties(allBounties);
}

function renderBounties(bounties){
  const list=document.getElementById('bountyList');
  if(!bounties.length){list.innerHTML='<p style="grid-column:1/-1;text-align:center;color:rgba(255,255,255,0.5)">No bounties match your filters</p>';return}
  list.innerHTML=bounties.map(b=>`
    <div class="bounty-card">
      <div class="bounty-header">
        <div class="bounty-id">Bounty #${b.id}</div>
        <div class="bounty-status status-${b.active?'active':'closed'}">${b.active?'ACTIVE':'CLOSED'}</div>
      </div>
      <div class="bounty-contract">${escapeHtml(b.contractAddress)}</div>
      <div class="bounty-amount">
        <div><div class="amount-label">Maximum Bounty</div><div class="amount-value">$${b.rewardPool.toLocaleString()}</div></div>
        <div style="text-align:right"><div class="amount-label">Remaining</div><div style="color:#8D96FF;font-size:1.2em;font-weight:700">$${b.remainingPool.toLocaleString()}</div></div>
      </div>
      <div class="bounty-tags">
        <span class="tag tag-${b.minSeverity.toLowerCase()}">Min: ${b.minSeverity}</span>
        <span class="tag">Smart Contract</span>
      </div>
    </div>
  `).join('');
}

async function loadSubmissions(){
  const data=await graphqlQuery(`{submissions{id bountyId title severity status payoutAmount paid hunter}}`);
  allSubmissions=data.submissions||[];
  updateStats();
  const list=document.getElementById('submissionList');
  if(!allSubmissions.length){list.innerHTML='<p style="color:rgba(255,255,255,0.5)">No vulnerability submissions yet. Be the first hunter!</p>';return}
  list.innerHTML=allSubmissions.map(s=>`
    <div class="submission-card">
      <div class="submission-header">
        <div class="submission-title">${escapeHtml(s.title)}</div>
        <span class="badge badge-${s.status.toLowerCase()}">${s.status}</span>
      </div>
      <div class="submission-meta">Submission #${s.id} • Bounty #${s.bountyId} • ${s.hunter}</div>
      <div style="display:flex;gap:10px;align-items:center">
        <span class="tag tag-${s.severity.toLowerCase()}">${s.severity}</span>
        ${s.payoutAmount>0?`<span style="color:#51cf66;font-weight:700">$${s.payoutAmount.toLocaleString()} ${s.paid?'[Paid]':''}</span>`:''}
      </div>
    </div>
  `).join('');
}

function updateStats(){
  document.getElementById('totalBounties').textContent=allBounties.filter(b=>b.active).length;
  document.getElementById('totalRewards').textContent='$'+allBounties.reduce((sum,b)=>sum+b.rewardPool,0).toLocaleString();
  document.getElementById('totalSubmissions').textContent=allSubmissions.length;
}

document.getElementById('createBountyForm').addEventListener('submit',async(e)=>{
  e.preventDefault();
  const mutation=`mutation{createBounty(contractAddress:"${escapeGraphQL(document.getElementById('contractAddress').value)}",rewardPool:${parseInt(document.getElementById('rewardPool').value)},minSeverity:${document.getElementById('minSeverity').value})}`;
  await graphqlQuery(mutation);
  showAlert('Bounty created successfully!');
  e.target.reset();
  setTimeout(loadBounties,1000);
});

document.getElementById('submitVulnForm').addEventListener('submit',async(e)=>{
  e.preventDefault();
  const mutation=`mutation{submitVulnerability(bountyId:${parseInt(document.getElementById('bountyId').value)},title:"${escapeGraphQL(document.getElementById('vulnTitle').value)}",description:"${escapeGraphQL(document.getElementById('vulnDescription').value)}",severity:${document.getElementById('vulnSeverity').value},proofOfConcept:"${escapeGraphQL(document.getElementById('proofOfConcept').value)}")}`;
  await graphqlQuery(mutation);
  showAlert('Vulnerability submitted successfully!');
  e.target.reset();
  setTimeout(loadSubmissions,1000);
});

document.getElementById('verifyForm').addEventListener('submit',async(e)=>{
  e.preventDefault();
  const mutation=`mutation{verifySubmission(submissionId:${parseInt(document.getElementById('submissionId').value)},approved:${document.getElementById('approved').value},payoutAmount:${parseInt(document.getElementById('payoutAmount').value)})}`;
  await graphqlQuery(mutation);
  showAlert('Submission verified!');
  e.target.reset();
  setTimeout(loadSubmissions,1000);
});

document.getElementById('claimPayoutForm').addEventListener('submit',async(e)=>{
  e.preventDefault();
  const mutation=`mutation{claimPayout(submissionId:${parseInt(document.getElementById('claimSubmissionId').value)})}`;
  await graphqlQuery(mutation);
  showAlert('Payout claimed successfully!');
  e.target.reset();
  setTimeout(()=>{loadBounties();loadSubmissions()},1000);
});

document.getElementById('subscribeForm').addEventListener('submit',async(e)=>{
  e.preventDefault();
  const email=document.getElementById('emailSubscribe').value;
  localStorage.setItem('subscribedEmail',email);
  showAlert('Subscribed! You\'ll receive updates about new bounties');
  e.target.reset();
});

document.getElementById('roleToggle').addEventListener('change',(e)=>{
  const isAdmin=e.target.checked;
  document.querySelectorAll('.admin-only').forEach(el=>el.style.display=isAdmin?'block':'none');
  document.querySelectorAll('.user-only').forEach(el=>el.style.display=isAdmin?'none':'block');
});

document.getElementById('searchInput').addEventListener('input',(e)=>{
  const query=e.target.value.toLowerCase();
  const filtered=allBounties.filter(b=>b.contractAddress.toLowerCase().includes(query));
  renderBounties(filtered);
});

document.querySelectorAll('.filter-btn').forEach(btn=>{
  btn.addEventListener('click',()=>{
    document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    const filter=btn.dataset.filter;
    let filtered=allBounties;
    if(filter==='active')filtered=allBounties.filter(b=>b.active);
    else if(filter==='high')filtered=allBounties.filter(b=>b.minSeverity==='HIGH'||b.minSeverity==='CRITICAL');
    else if(filter==='critical')filtered=allBounties.filter(b=>b.minSeverity==='CRITICAL');
    renderBounties(filtered);
  });
});

document.querySelectorAll('.user-only').forEach(el=>el.style.display='block');
loadBounties();
loadSubmissions();
setInterval(()=>{loadBounties();loadSubmissions()},15000);
</script>
</body>
</html>